<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Страус</title>
</head>
<body style="margin: 0px; padding: 0px; overflow: hidden">
  <canvas id="canvas" style="position: absolute; top: calc(50vh - 250px); left: calc(50vw - 250px)" />
  <!-- <script src="constructor.js"></script> -->
  <script src="straus.js"></script>
  <script>
    window.addEventListener('error',
      function (errorMsg, url, lineNumber) {
        alert(
          'Error: ' + errorMsg +
          ' Script: ' + url +
          ' Line: ' + lineNumber
        );
      }
    );
    window.addEventListener('load', function() {
      window.straus = new Straus({
        canvas: document.getElementById('canvas'),
        width: 500,
        height: 500,
        scale: 1,
        duration: 5,
        dir: 1,
        on_bg_change: function(bg) {
          document.body.style.background = bg;
        },
        on_anim_end: function() {
           straus.params.dir = -straus.params.dir;
           straus.start_animation();
        }
      });
      document.addEventListener('mousemove', function(e) {
        var dx = e.clientX - window.innerWidth / 2;
        var dy = e.clientY - window.innerHeight / 2;
        var dist = Math.sqrt(dx * dx + dy * dy);
        var t = Math.min(Math.max(dist / 250 - 0.2, 0), 1);
        if (t < 0.5) {
          document.title = 'Страус';
        } else {
          document.title = 'Пингвин';
        }
        straus.draw(t);
      });
      <!-- straus.start_animation(); -->
      document.title = 'Пингвин';
      straus.draw(1);
    });
  </script>
</body>
</html>
